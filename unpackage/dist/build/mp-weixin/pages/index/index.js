(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"214f":function(e,t,n){},"33c4":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,"c329"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"911c"))},"u-Text":function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u--text/u--text")]).then(n.bind(null,"097d"))},couponDialog:function(){return n.e("components/coupon-dialog/coupon-dialog").then(n.bind(null,"9a5b"))},diyBottomNav:function(){return n.e("components/diy-bottom-nav/diy-bottom-nav").then(n.bind(null,"4379"))}},i=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){return e.$util.redirectTo("/pages/category/category")})},a=[]},"53ed":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("6743"));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(){n.e("components/diy-bottom-nav/diy-bottom-nav").then(function(){return resolve(n("4379"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/coupon-dialog/coupon-dialog").then(function(){return resolve(n("9a5b"))}.bind(null,n)).catch(n.oe)},s={components:{couponDialog:c,diyBottomNav:a},mixins:[o.default],data:function(){return{banner:[],notice:[],show:!0,list:[],coupon:[],serviceFee:0,totalMoney:0,page:1,pageSize:15,total:1,orderlist:[],pickupdate:{startDate:"",endDate:"",startDate1:"",endDate1:"",startTime:"14:00",endTime:"14:00",dayNum:2},old:{x:0,y:0}}},onLoad:function(t){var n=this;if(e.hideTabBar(),this.getBanner(),this.getDateTime(),t.saleid&&e.setStorageSync("saleid",t.saleid),t.scene){var o=decodeURIComponent(t.scene);o=o.split("="),o.length&&o.forEach((function(t){-1!=t.indexOf("saleid")&&(e.setStorageSync("saleid",o[1]),e.getStorageSync("token")&&n.bindSale(o[1]))}))}this.getNewCoupon(),this.getCarList(),this.getServiceFee(),this.getCoinRate(),this.getStore()},onShow:function(){e.getStorageSync("saleid")&&this.bindSale(e.getStorageSync("saleid")),e.getStorageSync("userInfo")&&(this.getOrderList(),"否"==e.getStorageSync("userInfo").is_new&&(this.show=!1))},onReachBottom:function(){this.page>=this.total||(this.page++,this.getCarList())},onShareAppMessage:function(){},methods:{goToForm:function(t){e.getStorageSync("token")?this.$util.redirectTo(t):e.showModal({title:"请登录",success:function(e){e.confirm&&that.$util.redirectTo("/pages/login/login")}})},onChange:function(e){this.old.x=e.detail.x,this.old.y=e.detail.y},bindSale:function(e){this.$api.sendRequest({url:"/api/index.user/bindSale",data:{id:e},success:function(e){1==e.code&&console.log("绑定成功")}})},goOrderDetail:function(e){this.$util.redirectTo("/pages/orderDetail/orderDetail?id="+e.id)},goDestination:function(t){e.openLocation({latitude:parseFloat(t.lat),longitude:parseFloat(t.long),success:function(){console.log("导航成功")}})},getBanner:function(){var e=this;this.$api.sendRequest({url:"/api/index.index/bannerList",data:{},success:function(t){if(1==t.code){if(t.data.banner){var n=t.data.banner;n.forEach((function(t,n){t.image=e.$util.img(t.image)})),e.banner=n}e.notice=t.data.notice}}})},getStore:function(){this.$api.sendRequest({url:"/api/index.index/storeList",data:{},success:function(t){1==t.code&&t.data&&e.setStorageSync("storeInfo",t.data)}})},getCoinRate:function(){this.$api.sendRequest({url:"/api/car/Order/score_money",data:{},success:function(t){t.code>=1&&t.data&&e.setStorageSync("coin_rate",t.data)}})},getServiceFee:function(){var t=this;this.$api.sendRequest({url:"/api/car/Index/sever_money",data:{},success:function(n){1==n.code&&(t.serviceFee=n.data,e.setStorageSync("serviceFee",n.data))}})},getOrderList:function(){var e=this;this.$api.sendRequest({url:"/api/car/Order/myorder",data:{page:1,limit:3,status:"租赁中"},success:function(t){1==t.code?e.orderlist=t.data.data:e.$util.showToast({title:t.msg})}})},getCarList:function(){var e=this;this.$api.sendRequest({url:"/api/car/Index/motorcycle",data:{page:this.page,limit:this.pageSize,is_recommend:"是",songhuan_type:""},success:function(t){1==t.code&&(1==e.page?e.list=t.data.data:e.list=e.list.concat(t.data.data),e.total=t.data.last_page)}})},goDetail:function(e){this.$util.redirectTo("/pages/detail/detail?id="+e.id)},getNewCoupon:function(){var e=this;this.$api.sendRequest({url:"/api/coupon/Index/newercoupon",data:{},success:function(t){t.code>=1&&(e.totalMoney=t.data.amount,e.coupon=t.data.newercoupon)}})},receiveCoupon:function(){var t=this;e.getStorageSync("token")?this.$api.sendRequest({url:"/api/coupon/Index/newerReceiveCoupon",data:{},success:function(e){1==e.code&&(t.show=!1,t.getMemberInfo())}}):(this.show=!1,this.$util.redirectTo("/pages/login/login"))},getMemberInfo:function(){this.$api.sendRequest({url:"/api/index.user/userInfo",data:{},success:function(t){t.code>=1&&e.setStorageSync("userInfo",t.data)}})},getDateTime:function(){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,i=t.getDate();o=o<10?"0"+o:o,i=i<10?"0"+i:i;var a=this.getago(t,2),c="".concat(n,"-").concat(o,"-").concat(i),s=a.date;this.pickupdate.startDate=c,this.pickupdate.endDate=s,this.pickupdate.startDate1="".concat(o,"月").concat(i,"日"),this.pickupdate.endDate1=a.date2,e.setStorageSync("pickupdate",this.pickupdate)},getago:function(e,t){var n=new Date(e),o=new Date(n.getFullYear(),n.getMonth(),n.getDate()+ +t),i=o.getFullYear(),a=o.getMonth()+1;a=a<10?"0"+a:a;var c=o.getDate();c=c<10?"0"+c:c;var s={date:"".concat(i,"-").concat(a,"-").concat(c),date2:"".concat(a,"月").concat(c,"日")};return s},goTo:function(e){this.$util.redirectTo(e)},goToVip:function(){e.getStorageSync("token")?this.$util.redirectTo("/otherpages/openVip/openVip"):e.showModal({title:"请登录",success:function(e){e.confirm&&that.$util.redirectTo("/pages/login/login")}})},close:function(){this.show=!1}}};t.default=s}).call(this,n("543d")["default"])},"70f7":function(e,t,n){"use strict";n.r(t);var o=n("53ed"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},7130:function(e,t,n){"use strict";n.r(t);var o=n("33c4"),i=n("70f7");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("a12f");var c,s=n("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"7c11f140",null,!1,o["a"],c);t["default"]=u.exports},a12f:function(e,t,n){"use strict";var o=n("214f"),i=n.n(o);i.a},d8c1:function(e,t,n){"use strict";(function(e){n("1cde");o(n("66fd"));var t=o(n("7130"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])}},[["d8c1","common/runtime","common/vendor"]]]);