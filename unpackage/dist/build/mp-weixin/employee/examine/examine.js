(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["employee/examine/examine"],{2589:function(e,t,i){"use strict";i.r(t);var n=i("a241"),o=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=o.a},"8cc1":function(e,t,i){"use strict";(function(e){i("1cde");n(i("66fd"));var t=n(i("e28e"));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i("543d")["createPage"])},"97bb":function(e,t,i){"use strict";var n=i("f7ef"),o=i.n(n);o.a},a241:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("a34a")),o=a(i("513a"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e,t,i,n,o,a,r){try{var u=e[a](r),c=u.value}catch(s){return void i(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,o){var a=e.apply(t,i);function r(e){s(a,n,o,r,u,"next",e)}function u(e){s(a,n,o,r,u,"throw",e)}r(void 0)}))}}var f={data:function(){return{form:{mileage:"",oil_num:"",quantity:""},fileList1:[],fileList2:[],id:"",edit:0,video:"",type:""}},onLoad:function(e){this.id=e.id,this.type=e.type,this.edit=e.edit,1==this.edit&&this.getOrderDetail()},methods:{getOrderDetail:function(){var e=this;this.$api.sendRequest({url:"/api/sale/Index/orderDetails",data:{id:this.id},success:function(t){if(1==t.code&&t.data){var i="",n="",o="",a="",r=[],u=t.data.order_checkaccept;u.forEach((function(t,u){t.type==e.type&&(i=t.mileage,n=t.oil_num,o=t.quantity,a=t.video_image,r=t.images)})),e.form.mileage=i,e.form.oil_num=n,e.form.quantity=o,e.video=a,r.length&&r.forEach((function(t,i){var n=e.$util.img(t);e.fileList1.push({url:n,half_url:t})}))}else e.$util.showToast({title:t.msg})}})},previewImage:function(t,i){e.previewImage({current:i,urls:this.fileList1})},uploadvideo:function(){var t=this;e.chooseMedia({count:1,mediaType:["video"],sourceType:["camera","album"],maxDuration:30,success:function(e){t.upload_file_server(e.tempFiles[0].tempFilePath).then((function(e){t.video=e}))}})},upload_file_server:function(t){var i=o.default.baseUrl+"/api/common/upload";return new Promise((function(n,o){e.uploadFile({url:i,filePath:t,name:"file",formData:{token:e.getStorageSync("token")},success:function(e){console.log("999",e);var t=JSON.parse(e.data);t.code>=1?n(t.data.url):o("error")}})}))},deletevideo:function(){this.video=""},submit:function(){var t=this;if(this.form.mileage)if(this.form.oil_num){var i=[];this.fileList1.length&&(this.fileList1.forEach((function(e,t){i.push(e.half_url)})),i=i.join(",")),this.$api.sendRequest({url:"/api/sale/Index/orderCheckaccept",data:{order_id:this.id,type:this.type,mileage:this.form.mileage,oil_num:this.form.oil_num,quantity:this.form.quantity,images:this.fileList1.length?i:"",video_image:this.video?this.video:""},success:function(i){1==i.code?(t.$util.showToast({title:"验车成功"}),setTimeout((function(){e.navigateBack({delta:1})}),1e3)):t.$util.showToast({title:i.msg})}})}else this.$util.showToast({title:"请填写车剩余油量"});else this.$util.showToast({title:"请填写车辆里程"})},deletePic:function(e){this["fileList".concat(e.name)].splice(e.index,1)},afterRead:function(e){var t=this;return l(n.default.mark((function i(){var o,a,r,c,s;return n.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:console.log(e),o=[].concat(e.file),a=t["fileList".concat(e.name)].length,o.map((function(i){t["fileList".concat(e.name)].push(u(u({},i),{},{status:"uploading",message:"上传中"}))})),r=0;case 5:if(!(r<o.length)){i.next=15;break}return i.next=8,t.uploadFilePromise(o[r].url);case 8:c=i.sent,s=t["fileList".concat(e.name)][a],t["fileList".concat(e.name)].splice(a,1,Object.assign(s,{status:"success",message:"",url:c.fullurl,half_url:c.url})),a++;case 12:r++,i.next=5;break;case 15:case"end":return i.stop()}}),i)})))()},uploadFilePromise:function(t){return new Promise((function(i,n){e.uploadFile({url:o.default.baseUrl+"/api/common/upload",filePath:t,name:"file",formData:{token:e.getStorageSync("token")},success:function(e){var t=JSON.parse(e.data);setTimeout((function(){i(t.data)}),1e3)}})}))}}};t.default=f}).call(this,i("543d")["default"])},de08:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uUpload:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(i.bind(null,"5584"))},uIcon:function(){return Promise.all([i.e("common/vendor"),i.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(i.bind(null,"911c"))}},o=function(){var e=this,t=e.$createElement,i=(e._self._c,e.video?e.$util.img(e.video):null);e.$mp.data=Object.assign({},{$root:{g0:i}})},a=[]},e28e:function(e,t,i){"use strict";i.r(t);var n=i("de08"),o=i("2589");for(var a in o)"default"!==a&&function(e){i.d(t,e,(function(){return o[e]}))}(a);i("97bb");var r,u=i("f0c5"),c=Object(u["a"])(o["default"],n["b"],n["c"],!1,null,"2525755c",null,!1,n["a"],r);t["default"]=c.exports},f7ef:function(e,t,i){}},[["8cc1","common/runtime","common/vendor"]]]);